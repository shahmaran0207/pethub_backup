<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div class="min-h-screen flex flex-col bg-orange-50">
    <div th:replace="~{header :: header}"></div>
    <main class="flex-1">
        <section class="py-16">
            <div class="container mx-auto px-4 md:px-6 grid md:grid-cols-2 gap-8 items-center">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold mb-4">계정을 잊어버리셨나요?</h1>
                    <p class="text-lg text-gray-600 mb-6">계정 찾기 기능으로 계정 정보를 안전하게 복구하세요.</p>
                    <div class="grid gap-8">
                        <div>
                            <h2 class="text-2xl font-bold mb-2">아이디 찾기</h2>
                            <p class="text-gray-600 mb-4">이메일 인증을 하여 사용자 아이디를 검색합니다.</p>
                            <br>
                            <!-- 아이디 찾기 폼 -->
                            <form id="findIdForm" action="/member/findId" method="post">
                                <!-- 이메일 입력 필드 -->
                                <div class="grid grid-cols-2 gap-2 mb-4">
                                    <div class="grid gap-2">
                                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 block mb-2" for="email">
                                            이메일
                                        </label>
                                        <input class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" id="email" placeholder="ex)example@gmail.com" type="email" name="email"/>
                                    </div>
                                    <div class="grid gap-2 flex items-end">
                                        <button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-orange-600 text-white hover:bg-orange-500/90 rounded-md" id="auth" style="height: 2.5rem; width: 50%;" type="button">
                                            인증번호 발송
                                        </button>
                                    </div>
                                </div>
                                <!-- 인증번호 입력 필드 -->
                                <div class="grid grid-cols-2 gap-2">
                                    <div class="grid gap-2">
                                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 block mb-2" for="authNum">
                                            인증번호
                                        </label>
                                        <input class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" id="authNum" placeholder="인증번호를 입력하세요." required="" type="text" name="authNum"/>
                                    </div>
                                    <div class="grid gap-2 flex items-end">
                                        <button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-orange-600 text-white hover:bg-orange-500/90 rounded-md" style="height: 2.5rem; width: 50%;" type="submit">
                                            아이디 찾기
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <br>
                        <div>
                            <h2 class="text-2xl font-bold mb-2">비밀번호 찾기</h2>
                            <p class="text-gray-600 mb-4">비밀번호를 재설정하려면 사용자 아이디와 이메일을 인증해야 합니다.</p>
                            <!-- 비밀번호 찾기 폼 -->
                            <form id="findPwForm" action="/member/findPw" method="post">
                                <!-- 사용자 아이디 입력 필드 -->
                                <div class="mb-4">
                                    <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 block mb-2" for="userid">
                                        사용자 아이디
                                    </label>
                                    <input class="flex h-10 w-3/4 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" id="userid" placeholder="당신의 아이디를 입력하세요." required="" type="text" name="userid"/>
                                </div>
                                <!-- 이메일 입력 필드 -->
                                <div class="grid grid-cols-2 gap-2 mb-4">
                                    <div class="grid gap-2">
                                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 block mb-2" for="email_pw">
                                            이메일
                                        </label>
                                        <input class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" id="email_pw" placeholder="ex)example@gmail.com" type="email" name="email"/>
                                    </div>
                                    <div class="grid gap-2 flex items-end">
                                        <button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-orange-600 text-white hover:bg-orange-500/90 rounded-md" id="auth_pw" style="height: 2.5rem; width: 50%;" type="button">
                                            인증번호 발송
                                        </button>
                                    </div>
                                </div>
                                <!-- 인증번호 입력 필드 -->
                                <div class="grid grid-cols-2 gap-2">
                                    <div class="grid gap-2">
                                        <label class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 block mb-2" for="authNum">
                                            인증번호
                                        </label>
                                        <input class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" id="authNum_pw" placeholder="인증번호를 입력하세요." required="" type="text" name="authNum"/>
                                    </div>
                                    <div class="grid gap-2 flex items-end">
                                        <button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-orange-600 text-white hover:bg-orange-500/90 rounded-md" style="height: 2.5rem; width: 50%;" type="submit">
                                            비밀번호 찾기
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div>
                    <img
                            src="https://itbank-pethub-s3.s3.ap-northeast-2.amazonaws.com/find.png"
                            width="600"
                            height="400"
                            alt="Account Finder"
                            class="rounded-lg shadow-lg"
                            style="aspect-ratio: 600 / 400; object-fit: cover;"
                    />
                </div>
            </div>
        </section>
    </main>
    <div th:replace="~{footer :: footer}"></div>
</div>
<script type="text/javascript" th:inline="javascript">
    var userid = '[[${userid}]]';
    var newPw = '[[${newPw}]]';
    var msg = `[[${msg}]]`;

    if (userid !== 'null') {
        alert('회원님의 아이디는 ' + userid + '입니다.');
        location.href = '/';
    }

    if (newPw !== 'null') {
        alert('회원님의 새 비밀번호는 ' + newPw + '입니다.');
        location.href = '/';
    }

    if (msg !== 'null') {
        alert(msg);
    }

    function sendAuthNum(emailFieldId, alertMessage
    ) {
        var email = document.getElementById(emailFieldId).value;
        fetch('/member/AuthNum', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({email: email})
        })
            .then(response => {
                if (response.ok) {
                    alert(alertMessage);
                } else {
                    alert('인증번호 전송에 실패했습니다.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('인증번호 전송에 실패했습니다.');
            });
    }

    document.getElementById('auth').addEventListener('click', function () {
        sendAuthNum('email', '인증번호가 전송되었습니다.');
    })
    ;

    document.getElementById('auth_pw').addEventListener('click', function () {
        sendAuthNum('email_pw', '인증번호가 전송되었습니다.');
    })
    ;
</script>
</body>
</html>